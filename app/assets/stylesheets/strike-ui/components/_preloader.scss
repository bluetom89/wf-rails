.preloader {
  transition: opacity 150ms;

  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background-color: transparentize($white, .1);
  opacity: 0;
  z-index: 900;

  &.in {
    opacity: 1;
  }

  > div {
    position: absolute;
    top: 50%;
    background-color: $orange;
    border-radius: 50%;
  }

  $sizes: 'small', 'medium', 'large';
  $colors: $orange, $blue, $green, $red, $purple, $green, $orange, $blue, $red, $purple;

  @for $i from 1 through length($sizes) {
    &.#{nth($sizes, $i)} > div {
      $radius: $i * 7px;
      $delay: (length($sizes) + 1 - $i) * 100ms;

      width: $radius;
      height: $radius;
      left: -$radius;
      margin-top: -($radius / 2);
      animation: move-#{nth($sizes, $i)} 4s infinite cubic-bezier(.5, .64, .81, .23);

      @for $j from 1 through 10 {
        &:nth-child(#{$j}) {
          background-color: nth($colors, $j);
          animation-delay: $delay * $j;
        }
      }

      @keyframes move-#{nth($sizes, $i)} {
        0% {left: 0%;}
        #{$i * 25}% {left: 100%;}
        100% {left: 100%;}
      }
    }
  }
}
